\usepackage[english]{babel}
\usepackage[utf8x]{inputenc}
\usepackage{float}
\usepackage{amsmath}
\usepackage{graphicx}
\usepackage{subcaption}
\usepackage[colorinlistoftodos]{todonotes}
\usepackage{setspace}
\usepackage{geometry}
\usepackage{physics}
\usepackage{titlesec}
\usepackage{amssymb}
\usepackage{cite}
\usepackage[toc,page]{appendix}
\geometry{legalpaper, portrait, margin=1in,top=1.5in,bottom=1.5in}
\setcounter{secnumdepth}{5}
\usepackage[belowskip=10pt,aboveskip=10pt]{caption}
%\setlength{\abovedisplayskip}{50pt}
%\setlength{\belowdisplayskip}{50pt}
\setlength{\belowcaptionskip}{0pt}
\setlength{\abovecaptionskip}{20pt}
%\setlength{\intextsep}{50pt}
\setlength{\textfloatsep}{1in}
\usepackage{placeins}
\usepackage[usestackEOL]{stackengine}
\usepackage{chngpage}
\newcommand\red[1]{{\color{purple}#1}}
\linepenalty=5
\renewcommand{\floatpagefraction}{.8}%
\usepackage{siunitx}